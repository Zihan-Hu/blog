---
category:
  - 题解
tag:
  - 2023 暑期集训
  - 贪心
  - 排序
excerpt: 看上去像 dp，实际是排序 + 贪心。
---

# ZROI P2577 题解

## 题面

<!-- @include: ../../source/ZR-P2577/problem.md -->

## 解题

看到题，第一时间应该想到 dp。

::: details 当 dp 做的思路

### 问题定义

大问题：前 $n$ 个路口的最大积分。

小问题：前 $i$ 个路口扳动 $j$ 次的最大积分。

### 状态定义

$f_{i,j}$ := 前 $i$ 个路口扳动 $j$ 次的最大积分

### 状态转移

对于第 $i$ 个路口 $(i >= 1, j <= i)$：

- 如果扳动：$f_{i,j} = f_{i - 1,j - 1} + b_i - j$
- 如果不动：$f_{i,j} = f_{i - 1,j} + a_i$

两个中取最大。

### 答案

$$ max(f_{n, 0}, f_{n, 1}, \ldots, f_{n, n}) $$

# 边界

$$
  f_{i, 0} = f_{i - 1,0} + b_i \\
  f_{0, j} = 0 \\
  f_{0, 0} = 0
$$

# 压缩

用两个数组交替使用，或滚动数组。

:::

虽然这道题 dp 不是正解，但卡常貌似能过（靠运气

::: details

::: warning

卡常有风险，复制需谨慎！

作者懒没卡常，需要者请自行发挥。

:::

@[code cpp](../../source/ZR-P2577/dp.cpp)

:::

那正解如何呢？

由于一个决策不会对后续的路线产生影响，那么我们可以任意更换路口的顺序，答案不变。

可以采用贪心思想，为了最大化收益，优先扳动 $b_i$ 比 $a_i$ 大得多的。

关于题中不耐烦的扣分，只需要在判断大小时额外减去即可。

所以，我们可以按 $b_i - a_i$ 对 $a$ 和 $b$ 进行降序排序，再从头（$b_i - a_i$ 最大）开始扳动。

除去不耐烦的扣分，这样就能保证从大到小取到收益，也就是**答案是一段前缀**。

关于不耐烦的扣分，由于顺序不影响答案，并且答案是一段前缀，第 $i$ 个就扣 $i$ 分。

## 代码

@[code cpp](../../source/ZR-P2577/sort.cpp)
