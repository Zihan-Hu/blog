---
category:
  - 题解
tag:
  - 2023 暑期集训
  - 二分
excerpt: 根据最优的选择策略发现单调性，使用二分解决。
---

# ZROI P1376 题解

## 题面

::: details 点击此处展开题面

<!-- @include: ../../source/ZR-1376/problem.md -->

:::

## 解题

一看又是商品，马上准备写背包。

再一看。。

背包题是这样的？？背包显然不是正解。

分析可以发现，多留一天，可选的汇率就多一种。为了能买到足够的商品，所以我们要尽量选择**汇率更小**的那天兑换，意味着等量的第一种贝壳可换得更多的其他贝壳。

这样的话，对于第 $i$ 天，如果

$$ a_i > \max_{j < i} a_j $$

那么我们就可以考虑选择第 $i$ 天，否则就考虑选择

$$ \argmax_{j < i} a_j $$

这一天。

::: note 说人话

只考虑 1 ~ $i$ 期间汇率最小的那天。

证明：如果汇率不是最小，则换得的贝壳更少。由于商品价格一定，所以买到的商品数不会更多，即方案不会更优。

:::

这样，每一天被考虑汇率组成序列 $d$，我们有 $d_i = \max \{d_{i - 1}, a_i\}$，对于 $b$ 同理。

容易发现 $d$ 具有单调不下降的性质，并且由于可行域是一个前缀，这道题应该使用——二分。

我们把每一天的序号（从 1 到 $n$）定义为这天的日期，二分买够 $k$ 个商品的日期即可。

对于商品，由于只要求足够的数量，所以优先考虑价格更低的商品。

因此，对商品按价格升序排序，选择的又是一个前缀。

那么对于以上的情况，解应该满足什么条件呢？

设：

|           | 最小汇率的日期 | 买的数量 | 价格的前缀和 |
| :-------: | :-----------: | :-----: | :---------: |
| 第二种贝壳 | $e'$          | $r'$    | $p'$        |
| 第三种贝壳 | $e''$         | $r''$   | $p''$       |

有：

$$
\begin{cases}
  e' \times p'_{r'} + e'' \times p''_{r''} \leq s \\
  r' + r'' \geq k
\end{cases}
$$

二分求解即可。

## 代码

@[code cpp](../../source/ZR-1376/binary.cpp)
